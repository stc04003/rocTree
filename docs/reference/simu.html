<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to generate simulated data used in the manuscript. — simu • rocTree</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Function to generate simulated data used in the manuscript. — simu" />

<meta property="og:description" content="This function is used to generate simulated data under various settings.
Let \(Z\) be a \(p\)-dimensional vector of possible time-dependent covariates and
\(\beta\) be the vector of regression coefficient.
The survival times (\(T\)) are generated from the hazard function sepecified as follow:
Scenario 1.1Proportional hazards model:
$$\lambda(t|Z) = \lambda_0(t) e^{-0.5 Z_1 + 0.5 Z_2 - 0.5 Z_3 ... + 0.5 Z_{10}},$$
where \lambda_0(t) = 2t.
Scenario 1.2Proportional hazards model with noise variable:
$$\lambda(t|Z) = \lambda_0(t) e^{2Z_1 + 2Z_2 + 0Z_3 + ... + 0Z_{10}},$$
where \lambda_0(t) = 2t.
Scenario 1.3Proportional hazards model with nonlinear covariate effects:
$$\lambda(t|Z) = \lambda_0(t) e^{[2\sin(2\pi Z_1) + 2|Z_2 - 0.5|]},$$
where \lambda_0(t) = 2t.
Scenario 1.4Accelerated failure time model:
$$\log(T) = -2 + 2Z_1 + 2Z_2 + \epsilon,$$ where \(\epsilon\) follows \(N(0, 0.5^2).\)
Scenario 1.5Generalized gamma family:
$$T = e^{\sigma\omega},$$ where \(\omega = \log(Q^2 g) / Q\), \(g\) follows Gamma(\(Q^{-2}, 1\)),
\(\sigma = 2Z_1, Q = 2Z_2.\)
Scenario 2.1Dichotomous time dependent covariate with at most one change in value:
 $$\lambda(t|Z(t)) = \lambda_0(t)e^{2Z_1(t) + 2Z_2},$$
where \(Z_1(t)\) is the time-dependent covariate: \(Z_1(t) = \theta I(t \ge U_0) + (1 - \theta) I(t &amp;lt; U_0)\),
,\(\theta\) is a Bernoulli variable with equal probability, and \(U_0\) follows a uniform distribution over \([0, 1]\).
Scenario 2.2Dichotomous time dependent covariate with multiple changes:
 $$\lambda(t|Z(t)) = e^{2Z_1(t) + 2Z_2},$$
where \(Z_1(t) = \theta[I(U_1\le t &amp;lt; U_2) + I(U_3 \le t)] + (1 - \theta)[I(t &amp;lt; U_1) + I(U_2\le t &amp;lt; U_3)]\),
\(\theta\) is a Bernoulli variable with equal probability, and \(U_1\le U_2\le U_3\)
are the first three terms of a stationary Poisson process with rate 10.
Scenario 2.3Proportional hazard model with a continuous time dependent covariate:
$$\lambda(t|Z(t)) = 0.1 e^{Z_1(t) + Z_2},$$ where \(Z_1(t) = kt + b\),
\(k\) and \(b\) are independent uniform random variables over \([1, 2]\).
Scenario 2.4Non-proportional hazards model with a continuous time dependent covariate:
$$\lambda(t|Z(t)) = 0.1 \cdot[1 + \sin\{Z_1(t) + Z_2\}],$$ where \(Z_1(t) = kt + b\),
\(k\) and \(b\) follow independent uniform distributions over \([1, 2]\).
Scenario 2.5Non-proportional hazards model with a nonlinear time dependent covariate:
$$\lambda(t|Z(t)) = 0.1 \cdot[1 + \sin\{Z_1(t) + Z_2\}],$$ where \(Z_1(t) = 2kt\cdot \{I(t &amp;gt; 5) - 1\} + b\),
\(k\) and \(b\) follow independent uniform distributions over \([1, 2]\).
The censoring times are generated from an independent uniform distribution over [0, c],
where c was tuned to yield censoring percentages of 25% and 50%.
" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rocTree</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.99.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rocTree-sim.html">Generating simulated data in `rocTree` package</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/stc04003/rocTree">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to generate simulated data used in the manuscript.</h1>
    <small class="dont-index">Source: <a href='http://github.com/stc04003/rocTree/blob/master/R/simu.R'><code>R/simu.R</code></a></small>
    <div class="hidden name"><code>simu.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function is used to generate simulated data under various settings.
Let \(Z\) be a \(p\)-dimensional vector of possible time-dependent covariates and
\(\beta\) be the vector of regression coefficient.
The survival times (\(T\)) are generated from the hazard function sepecified as follow:</p><dl class='dl-horizontal'>
<dt>Scenario 1.1</dt><dd><p>Proportional hazards model:
$$\lambda(t|Z) = \lambda_0(t) e^{-0.5 Z_1 + 0.5 Z_2 - 0.5 Z_3 ... + 0.5 Z_{10}},$$</p></dd>
where \lambda_0(t) = 2t.
<dt>Scenario 1.2</dt><dd><p>Proportional hazards model with noise variable:
$$\lambda(t|Z) = \lambda_0(t) e^{2Z_1 + 2Z_2 + 0Z_3 + ... + 0Z_{10}},$$</p></dd>
where \lambda_0(t) = 2t.
<dt>Scenario 1.3</dt><dd><p>Proportional hazards model with nonlinear covariate effects:
$$\lambda(t|Z) = \lambda_0(t) e^{[2\sin(2\pi Z_1) + 2|Z_2 - 0.5|]},$$</p></dd>
where \lambda_0(t) = 2t.
<dt>Scenario 1.4</dt><dd><p>Accelerated failure time model:
$$\log(T) = -2 + 2Z_1 + 2Z_2 + \epsilon,$$ where \(\epsilon\) follows \(N(0, 0.5^2).\)</p></dd>
<dt>Scenario 1.5</dt><dd><p>Generalized gamma family:
$$T = e^{\sigma\omega},$$ where \(\omega = \log(Q^2 g) / Q\), \(g\) follows Gamma(\(Q^{-2}, 1\)),
\(\sigma = 2Z_1, Q = 2Z_2.\)</p></dd>
<dt>Scenario 2.1</dt><dd><p>Dichotomous time dependent covariate with at most one change in value:
 $$\lambda(t|Z(t)) = \lambda_0(t)e^{2Z_1(t) + 2Z_2},$$
where \(Z_1(t)\) is the time-dependent covariate: \(Z_1(t) = \theta I(t \ge U_0) + (1 - \theta) I(t &lt; U_0)\),
,\(\theta\) is a Bernoulli variable with equal probability, and \(U_0\) follows a uniform distribution over \([0, 1]\).</p></dd>
<dt>Scenario 2.2</dt><dd><p>Dichotomous time dependent covariate with multiple changes:
 $$\lambda(t|Z(t)) = e^{2Z_1(t) + 2Z_2},$$
where \(Z_1(t) = \theta[I(U_1\le t &lt; U_2) + I(U_3 \le t)] + (1 - \theta)[I(t &lt; U_1) + I(U_2\le t &lt; U_3)]\),
\(\theta\) is a Bernoulli variable with equal probability, and \(U_1\le U_2\le U_3\)
are the first three terms of a stationary Poisson process with rate 10.</p></dd>
<dt>Scenario 2.3</dt><dd><p>Proportional hazard model with a continuous time dependent covariate:
$$\lambda(t|Z(t)) = 0.1 e^{Z_1(t) + Z_2},$$ where \(Z_1(t) = kt + b\),
\(k\) and \(b\) are independent uniform random variables over \([1, 2]\).</p></dd>
<dt>Scenario 2.4</dt><dd><p>Non-proportional hazards model with a continuous time dependent covariate:
$$\lambda(t|Z(t)) = 0.1 \cdot[1 + \sin\{Z_1(t) + Z_2\}],$$ where \(Z_1(t) = kt + b\),
\(k\) and \(b\) follow independent uniform distributions over \([1, 2]\).</p></dd>
<dt>Scenario 2.5</dt><dd><p>Non-proportional hazards model with a nonlinear time dependent covariate:
$$\lambda(t|Z(t)) = 0.1 \cdot[1 + \sin\{Z_1(t) + Z_2\}],$$ where \(Z_1(t) = 2kt\cdot \{I(t &gt; 5) - 1\} + b\),
\(k\) and \(b\) follow independent uniform distributions over \([1, 2]\).</p></dd>
The censoring times are generated from an independent uniform distribution over [0, c],
where c was tuned to yield censoring percentages of 25% and 50%.
</dl>
    
    </div>

    <pre class="usage"><span class='fu'>simu</span>(<span class='no'>n</span>, <span class='no'>cen</span>, <span class='no'>scenario</span>, <span class='kw'>summary</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>trueHaz</span>(<span class='no'>dat</span>)

<span class='fu'>trueSurv</span>(<span class='no'>dat</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>an integer value indicating the number of subjects.</p></td>
    </tr>
    <tr>
      <th>cen</th>
      <td><p>is a numeric value indicating the censoring percentage; three levels, 0%, 25%, 50%, are allowed.</p></td>
    </tr>
    <tr>
      <th>scenario</th>
      <td><p>can be either a numeric value or a character string.
This indicates the simulation scenario noted above.</p></td>
    </tr>
    <tr>
      <th>summary</th>
      <td><p>a logical value indicating whether a brief data summary will be printed.</p></td>
    </tr>
    <tr>
      <th>dat</th>
      <td><p>is a data.frame prepared by <code>simu</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>simu</code> returns a <code>data.frame</code>.
The returned data.frame consists of columns:</p><dl class='dl-horizontal'>
<dt>id</dt><dd><p>is the subject id.</p></dd>
<dt>Y</dt><dd><p>is the observed follow-up time.</p></dd>
<dt>death</dt><dd><p>is the death indicator; death = 0 if censored.</p></dd>
<dt>z1--z10</dt><dd><p>is the possible time-independent covariate.</p></dd>
<dt>k, b, U</dt><dd><p>are the latent variables used to generate $Z_1(t)$ in Scenario 2.1 -- 2.5.</p></dd>
</dl><p>The returned data.frame can be supply to <code>trueHaz</code> and <code>trueSurv</code> to generate the true cumulative hazard function and the survival function, respectively.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='fu'>simu</span>(<span class='fl'>10</span>, <span class='fl'>0.25</span>, <span class='fl'>1.2</span>, <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Summary results:
#&gt; Number of subjects: 10
#&gt; Number of subjects experienced death: 9
#&gt; Number of covariates: 10
#&gt; Time independent covaraites: z1 z2 z3 z4 z5 z6 z7 z8 z9 z10
#&gt; Number of unique observation times: 10
#&gt; Median survival time: 0.2983867
#&gt; </div><div class='output co'>#&gt; # A tibble: 55 x 13
#&gt;       id   Time death    z1    z2    z3    z4    z5    z6    z7    z8    z9
#&gt;    &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1     1 0.0822     0 0.266 0.206 0.935 0.482 0.821 0.478 0.913 0.339 0.435
#&gt;  2     1 0.123      0 0.266 0.206 0.935 0.482 0.821 0.478 0.913 0.339 0.435
#&gt;  3     1 0.238      0 0.266 0.206 0.935 0.482 0.821 0.478 0.913 0.339 0.435
#&gt;  4     1 0.239      0 0.266 0.206 0.935 0.482 0.821 0.478 0.913 0.339 0.435
#&gt;  5     1 0.250      0 0.266 0.206 0.935 0.482 0.821 0.478 0.913 0.339 0.435
#&gt;  6     1 0.347      1 0.266 0.206 0.935 0.482 0.821 0.478 0.913 0.339 0.435
#&gt;  7     2 0.0822     0 0.372 0.177 0.212 0.600 0.647 0.861 0.294 0.839 0.713
#&gt;  8     2 0.123      0 0.372 0.177 0.212 0.600 0.647 0.861 0.294 0.839 0.713
#&gt;  9     2 0.238      0 0.372 0.177 0.212 0.600 0.647 0.861 0.294 0.839 0.713
#&gt; 10     2 0.239      0 0.372 0.177 0.212 0.600 0.647 0.861 0.294 0.839 0.713
#&gt; # ... with 45 more rows, and 1 more variable: z10 &lt;dbl&gt;</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='fu'>simu</span>(<span class='fl'>10</span>, <span class='fl'>0.50</span>, <span class='fl'>2.2</span>, <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Summary results:
#&gt; Number of subjects: 10
#&gt; Number of subjects experienced death: 7
#&gt; Number of covariates: 2
#&gt; Time independent covaraites: z1.
#&gt; Time dependent covaraites: z2.
#&gt; Number of unique observation times: 10
#&gt; Median survival time: 0.04646691
#&gt; </div><div class='output co'>#&gt; # A tibble: 55 x 9
#&gt;       id    Time death    z1    z2     e    u1    u2    u3
#&gt;    &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1     1 0.00183     0     0 0.206     1 0.104 0.109 0.212
#&gt;  2     1 0.00536     0     0 0.206     1 0.104 0.109 0.212
#&gt;  3     1 0.00604     0     0 0.206     1 0.104 0.109 0.212
#&gt;  4     1 0.00771     0     0 0.206     1 0.104 0.109 0.212
#&gt;  5     1 0.0335      0     0 0.206     1 0.104 0.109 0.212
#&gt;  6     1 0.0465      0     0 0.206     1 0.104 0.109 0.212
#&gt;  7     1 0.0675      0     0 0.206     1 0.104 0.109 0.212
#&gt;  8     1 0.0757      0     0 0.206     1 0.104 0.109 0.212
#&gt;  9     1 0.0940      0     0 0.206     1 0.104 0.109 0.212
#&gt; 10     1 0.264       0     1 0.206     1 0.104 0.109 0.212
#&gt; # ... with 45 more rows</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Yifei Sun, Mei-Cheng Wang, Sy Han Chiou.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

